# 6. 키-값 저장소 설계

키-값 저장소(key-value store)는 비관계형(non-relational) 데이터베이스이다.
저장소에 저장되는 값은 고유 식별자(identifier)를 키로 가져야 한다.
키-값은 pair 라고 지칭한다
키는 짧을수록 좋다


## 문제 이해및 설계 범위 확정

- 키-값 쌍의 크기는 10KB 이하
- 큰 데이터를 저장할수 있어야 함
- 높은 가용성을 제공
  - 장애가 있더라도 빨리 응답해야함
- 높은 규모 확장성을 제공
  - 트래픽 양에 따라 자동적으로 서버 증설/삭제가 이루어져야 함
- 데이터 일관성 수준은 조정이 가능해야 함
- 응답 지연시간(latency)이 짧아야 함

## 단일 서버 키-값 저장소

단일 서버 키-값 저장소
- 설계하기 가장 쉬움
- 키-값 쌍 전부를 메모리에 해시 테이블로 저장
  - 빠른 속도를 보장하지만 모든 데이터를 메모리 안에 두는것이 불가능하다는 단점이 있음

단점 개선 방법
- 데이터 압축
- 자주 쓰이는 데이터만 메모리에 두고 나머지는 디스크 저장

개선 방법대로 해도 한대 서버로 부족한 때가 바로 찾아옴
분산 키-값 저장소(distributed key-value store)를 만들어서 해결할 필요가 있음

## 분산 키-값 저장소

### CAP 정리(Consistency, Avaliability, Partition Tolerance theorem)

#### 일관성(Consistency)
항상 같은 데이터를 보게 되어야 함

#### 가용성(Avaliability)
장애가 발생하더라도 항상 응답을 받을수 있어야 함

#### 파티션 감내(Partition Tolerance)
네트워크에 파티션이 생기더라도 시스템은 계속 동작하여야 함

